# Desktop App Release Automation

è‡ªåŠ¨åŒ– Desktop App å‘å¸ƒæµç¨‹çš„ GitHub Actions å·¥ä½œæµã€‚

## ğŸš€ Release Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Desktop Release - Initialize                          â”‚
â”‚                        (workflow_dispatch on main)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. Validate & Calculate Version                                             â”‚
â”‚     - è¯»å–å½“å‰ç‰ˆæœ¬ from tauri.conf.json                                        â”‚
â”‚     - æ ¹æ® bump_type (patch/minor/major) è®¡ç®—æ–°ç‰ˆæœ¬                            â”‚
â”‚     - æ£€æŸ¥ release branch æ˜¯å¦å·²å­˜åœ¨                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Create Branch & Bump Version                                             â”‚
â”‚     - åˆ›å»º desktop/release-{version} åˆ†æ”¯                                     â”‚
â”‚     - æ›´æ–° tauri.conf.json, tauri.conf.staging.json, tauri.conf.production.json â”‚
â”‚     - Commit & Push                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Notify Slack (Release Created)                                           â”‚
â”‚     - é€šçŸ¥å›¢é˜Ÿ release branch å·²åˆ›å»º                                           â”‚
â”‚     - åŒ…å« cherry-pick æŒ‡ä»¤                                                   â”‚
â”‚     - é“¾æ¥åˆ° GitHub Actions ç­‰å¾… approval                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4a. Build Staging            â”‚     â”‚  4b. Build Production         â”‚
â”‚      (éœ€è¦ staging env å®¡æ‰¹)    â”‚     â”‚      (éœ€è¦ production env å®¡æ‰¹) â”‚
â”‚      - è°ƒç”¨ publish-staging    â”‚     â”‚      - è°ƒç”¨ publish-production â”‚
â”‚      - æ„å»ºæ‰€æœ‰å¹³å°å®‰è£…åŒ…         â”‚     â”‚      - æ„å»ºæ‰€æœ‰å¹³å°å®‰è£…åŒ…        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                                   â”‚
                    â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5a. Notify Staging Complete  â”‚     â”‚  5b. Notify Production Completeâ”‚
â”‚      - ç®€å•é€šçŸ¥ + ä¸‹è½½é“¾æ¥       â”‚     â”‚      - ğŸš€ æ­£å¼ Release å…¬å‘Š     â”‚
â”‚                               â”‚     â”‚      - åŒ…å«ç‰ˆæœ¬æè¿°              â”‚
â”‚                               â”‚     â”‚      - Release Notes é“¾æ¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Workflow Inputs

è§¦å‘ workflow æ—¶éœ€è¦å¡«å†™ï¼š

| Input | Type | Required | Description |
|-------|------|----------|-------------|
| `bump_type` | choice | âœ… | ç‰ˆæœ¬å‡çº§ç±»å‹ï¼špatch / minor / major |
| `release_description` | string | âœ… | Release æè¿°ï¼ˆä¼šæ˜¾ç¤ºåœ¨ Slack å…¬å‘Šä¸­ï¼‰ |
| `release_notes_url` | string | âŒ | Release Notes é“¾æ¥ï¼ˆNotionï¼‰ |

## ğŸ’¬ Slack Notifications

### 1. Release Created (åˆå§‹åŒ–å®Œæˆå)
```
ğŸš€ Desktop App 0.9.0 Release Initiated

Hey team! ğŸ‘‹

âœ… Release branch created & version bumped.
ğŸ“¦ 0.8.0 â†’ 0.9.0

ğŸ“ Changes: <release_description>

ğŸ“¢ Need to include your fix?
git fetch origin
git checkout -b my-fix desktop/release-0.9.0
git cherry-pick <commit-sha>
git push origin my-fix

â³ Waiting for build approval (Staging / Production)

[ğŸ“‚ View Branch] [â–¶ï¸ Review & Approve Builds]
```

### 2. Staging Complete
```
âœ… Desktop App v0.9.0 - Staging
Staging build successful!
ğŸ“¥ Download Staging Installer
```

### 3. Production Complete (Release Announcement)
```
ğŸš€ Desktop App Release v0.9.0 - 20/12/2025 ğŸš€

We're excited to announce that Desktop App v0.9.0 has just been released! ğŸ‰

<release_description>

ğŸ“‹ View full release notes

ğŸ“¥ Download:
â€¢ Production Installer
```

## ğŸ”§ Setup Requirements

### GitHub Secrets
- `SLACK_WEBHOOK_URL` - Slack Incoming Webhook URL

### GitHub Environments
éœ€è¦åœ¨ GitHub Repository Settings > Environments ä¸­åˆ›å»ºï¼š

1. **staging**
   - Required reviewers: (å¯é€‰ï¼Œè®¾ç½®éœ€è¦å®¡æ‰¹çš„äºº)
   
2. **production**
   - Required reviewers: (å»ºè®®è®¾ç½®ï¼Œç¡®ä¿ production å‘å¸ƒç»è¿‡å®¡æ‰¹)

## ğŸ“‚ Files

```
.github/workflows/
â”œâ”€â”€ desktop-release-init.yml        # ä¸»æµç¨‹ï¼šåˆå§‹åŒ– release + è§¦å‘æ„å»º
â”œâ”€â”€ desktop-app-publish.yml         # å…±äº«ï¼šæ„å»ºå’Œå‘å¸ƒé€»è¾‘
â”œâ”€â”€ desktop-app-publish-staging.yml # Staging æ„å»ºå…¥å£
â””â”€â”€ desktop-app-publish-production.yml # Production æ„å»ºå…¥å£
```
